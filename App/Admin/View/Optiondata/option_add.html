<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<include file="Common:head" />
</head>
<body>
 <style type="text/css">
        /*#fm{
            margin:0;
            padding:10px;
        }*/
		#fitem
		{
           margin:10px;
            padding:10px;
		}
        #optiontitle
        {
            width:600px;
            height: 80px;
        }
        #option
        {
            width: 600px;
            height: 50px;
        }
        
    </style>
　　　　　　　　
  <script type="text/javascript">
  // 声明全局数据
 if(typeof OPTION_TYPE_ENUM == "undefined"){
　　var OPTION_TYPE_ENUM = {
　　　　　　　　　SINGLE_OPTION:"101",
                  MULTI_OPTION:"102",
                  TRUE_FALSE_OPTION:"103",　　　　　　    
　　　　　　　  }
　　}
function OptionAddDialogFormSubmit()
{
  $.post('index.php?action=Add', function(){
		
	});
}

   function getCheckBoxState()
   {
   	 var el=document.getElementsByTagName("input");
   	 var len=el.length;
   	 var val=0;
   	 var res=0;
   	 try
   	 {

   	 	for (var i = 1; i <len; i++) 
	   	 {
	   	 	if (el[i].type=="checkbox" ) 
	   	 	{
	   	 		if (el[i].checked==true) 
	   	 		{
	   	 			//val=val+Number(el[i].value);
                   //alert(typeof(el[i].value)+el[i].value);
                   val=Number(el[i].value);
                   res=res+val;
                   //alert(val);
	   	 		}
	            
	   	 	}
	   	 	if (el[i].type=="radio"  ) 
	   	 	{
	   	 		if (el[i].checked==true)
	   	 		 {
	   	 			//val=Number(el[i].value);
	   	 			val=Number(el[i].value);
                     res=val;
	   	 		}
	            
	   	 	}
   	    }
   	    if (document.getElementById("answerserial"))
        	{
        		var target=document.getElementById("answerserial");
        		target.value=res;
        	}
   	    //res=Number(val);
   	    
   	 }
	   	catch(err)
	  	{
		  txt="There was an error on this page.\n\n";
		  txt+="Error description: " + err.message +i+ "\n\n";
		  txt+="Click OK to continue.\n\n";
		  alert(txt);
		}  	 
   }
        function onselect()
        {
            var pType=$('#option_t').combobox('getValue');
            var optionNum;
            var target;
            var checkType;
            switch(pType)
            {
            	case OPTION_TYPE_ENUM.SINGLE_OPTION:
            	  optionNum=4;
            	  checkType="radio";
            	  break;
            	case OPTION_TYPE_ENUM.MULTI_OPTION:
            	  optionNum=6;
            	  checkType="checkbox";
            	  break;
            	case OPTION_TYPE_ENUM.TRUE_FALSE_OPTION:
                   optionNum=2;
                   checkType="radio";
                   break;
                 default :
                    optionNum=0;
                    break;
            }
            ///控制页面html标签的显示
            for (var i = 1; i <=6; i++) {
           	    target="hide"+i;
           	    showElement(target,true);
           	    target="hideanswer"+i;
           	    showElement(target,true);
           	    target="answer"+i;
           	    modifyCheckBoxArr(target,checkType);
           }
           for (var i = optionNum+1; i <=6; i++) {
           	    target="hide"+i;
           	    showElement(target,false);
           	    target="hideanswer"+i;
           	    showElement(target,false);
           }
        }
        function modifyCheckBoxArr(targetid,arrVal)
        {	
        	if (document.getElementById(targetid))
        	{
        		target=document.getElementById(targetid);
        	    target.type=arrVal;
        	}
        }
        function showElement(targetid,state)
        {
	      if (document.getElementById(targetid))
	       {
	       	 target=document.getElementById(targetid);
	       	 if (state==false && target.style.display=="") 
	       	 {
	            target.style.display="none"; 
	       	 }
	       	 if (state==true && target.style.display=="none")
	       	 {
                target.style.display=""; 
	       	 }
	         
	       }
	    }
 </script>
        <form id="fm" method="post" novalidate action="index.php?action=Add">
		 <table  style=" width:700px" cellspacing="0"cellpadding="0">
		    <tr>
            <th></th>
		        <th style="text-align: left;">
		        <label>课程名称</label>
			    <input class="easyui-combobox" 
			            name="course_name"
			            data-options="
			                    url:'index.php?action=course',
			                    method:'get',
			                    valueField:'type_id',
			                    textField:'type_name',
			                    panelHeight:'auto',
                          value:201 
			            ">
                 <label>题目类型</label>
			    <input class="easyui-combobox" 
			            name="option_type"
			            id="option_t"
			            data-options="
			                    url:'<{:U('Dictdata/getDictNameJson?id=100')}>',
			                    method:'get',
			                    valueField:'type_id',
			                    textField:'type_name',
			                    panelHeight:'auto',
                          value:101,
			                    onSelect:onselect

			            ">
                  <!-- value为设置默认的值 -->
                </th>
            </tr>
            <tr>
                <th><label>题目</label></th>
                <th ><textarea  name="option_title"  class="txtNewsContent" id="optiontitle">text</textarea></th>
            </tr>
            <tr id="hide1">
                <th><label>选项A</label></th>
                <th><textarea name="optionA"   class="txtNewsContent" id="option" >A</textarea></th>
            </tr>
            <tr id="hide2">
                <th><label>选项B</label></th>
                <th><textarea name="optionB"   class="txtNewsContent" id="option">A</textarea></th>
            </tr>
            <tr  id="hide3">
                <th><label>选项C</label></th>
                <th><textarea name="optionC"   class="txtNewsContent" id="option">A</textarea></th>
            </tr>
            <tr id="hide4">
                <th><label>选项D</label></th>
                <th><textarea name="optionD"   class="txtNewsContent" id="option">A</textarea></th>
            </tr>
            <tr id="hide5">
                <th><label>选项E</label></th>
                <th><textarea name="optionE"   class="txtNewsContent" id="option">A</textarea></th>
            </tr>
            <tr id="hide6">
                <th><label>选项F</label></th>
                <th><textarea name="optionF"   class="txtNewsContent" id="option">A</textarea></th>
            </tr>
            <tr>
                <th></th>
	            <th style="text-align: left;">
	            <!-- 如果将radio都设置为一个名字则只能选择其中一个答案 -->
		            <span id="hideanswer1"><input type="checkbox" name="optionAnswer" id="answer1" value="1" onclick="getCheckBoxState()">A</input></span>
		            <span id="hideanswer2"><input type="checkbox" name="optionAnswer" id="answer2" value="2" onclick="getCheckBoxState()">B</input></span>
		            <span id="hideanswer3"><input type="checkbox" name="optionAnswer" id="answer3" value="4" onclick="getCheckBoxState()">C</input></span>
		            <span id="hideanswer4"><input type="checkbox" name="optionAnswer"  id="answer4" value="8" onclick="getCheckBoxState()">D</input></span>
		            <span id="hideanswer5"><input type="checkbox" name="optionAnswer" id="answer5" value="16" onclick="getCheckBoxState()">E</input></span>
		            <span id="hideanswer6"><input type="checkbox" name="optionAnswer"  id="answer6" value="32" onclick="getCheckBoxState()">F</input></span>
	            </th>
            </tr>
            <tr>
            <th></th>
                <th>  <input type="submit"></th>
            </tr>
		</table>
		<input id="answerserial" type="hidden" name="answerRes">
        </form>
        <span id="result"></span>
</body>
<script type="text/javascript">
$('.txtNewsContent').xheditor({ skin: 'o2007blue', tools: 'mfull', urlType: 'rel',   
             upLinkUrl: "../xheditor/upload.aspx", upLinkExt: "zip,rar,txt",
             upImgUrl: "../xheditor/upload.aspx", upImgExt: "jpg,jpeg,gif,png",
             upFlashUrl: "../xheditor/upload.aspx", upFlashExt: "swf",
             upMediaUrl: "../xheditor/upload.aspx", upMediaExt: "avi",
             // localUrlTest: /^https?:\/\/[^\/]*?(yxxx\.com)\//i, remoteImgSaveUrl: '../xheditor/saveremoteimg.aspx'
          });
</script>
